// Gradle script to setup a Native multi-platform project
kotlin {
    macosArm64('macos') {
        compilations.all {
            kotlinOptions {
                freeCompilerArgs += "-opt-in=kotlin.RequiresOptIn"
            }
        }
        binaries {
            test("integration")
        }
        tasks.getByName(targetName + "Test").testLogging {
            events "FAILED", "SKIPPED"
        }
    }
    ios {
        compilations.all {
            kotlinOptions {
                freeCompilerArgs += "-opt-in=kotlin.RequiresOptIn"
            }
        }
        compilations["main"].defaultSourceSet {
            kotlin {
                srcDirs("src/macosMain/kotlin")
            }
        }

        compilations["test"].defaultSourceSet {
            kotlin {
                srcDirs("src/macosTest/kotlin")
            }
        }
    }
}
